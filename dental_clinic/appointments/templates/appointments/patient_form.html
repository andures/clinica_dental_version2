{% extends 'appointments/base.html' %}

{% block title %}
    {% if form.instance.pk %}Editar Paciente{% else %}Crear Paciente{% endif %}
{% endblock %}

{% block content %}
<div class="container mx-auto p-2">
    <h1 class="text-3xl font-bold text-dental-blue mb-10 mt-8 text-center">
        {% if form.instance.pk %}
            Editar Paciente: {{ form.instance.name }}
        {% else %}
            Crear Nuevo Paciente
        {% endif %}
    </h1>

    <!-- Formulario -->
    <form method="post" class="bg-gray-800 p-5 rounded-lg shadow-lg">
        {% csrf_token %}
        <!-- Sección 1: Datos Generales -->
        <fieldset class="py-8 px-1 mx-auto max-w-4xl lg:py-16 bg-gray-600 p-2 rounded-lg shadow-lg">
            <legend class="text-xl font-semibold text-dental-blue flex justify-center">Datos Generales</legend>
            <div class="grid gap-4 sm:grid-cols-2 sm:gap-6">
                <!-- Nombre -->
                <div class="sm:col-span-2">
                    <label for="{{ form.name.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombre</label>
                    <input type="text" 
                           name="name" 
                           id="{{ form.name.id_for_label }}" 
                           value="{{ form.name.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Nombre del paciente"
                           required="required">
                </div>
                <!-- Edad -->
                <div>
                    <label for="{{ form.age.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Edad</label>
                    <input type="number" 
                           name="age" 
                           id="{{ form.age.id_for_label }}" 
                           value="{{ form.age.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Edad del paciente">
                </div>
                <!-- Correo Electrónico -->
                <div>
                    <label for="{{ form.email.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Correo Electrónico</label>
                    <input type="email" 
                           name="email" 
                           id="{{ form.email.id_for_label }}" 
                           value="{{ form.email.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Correo Electrónico">
                </div>
                <!-- Fecha de Nacimiento -->
                <div>
                    <label for="{{ form.birth_date.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Fecha de Nacimiento</label>
                    <input type="date" 
                           name="birth_date" 
                           id="{{ form.birth_date.id_for_label }}" 
                           value="{{ form.birth_date.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Fecha de Nacimiento">
                </div>
                <!-- Número de Expediente -->
                <div>
                    <label for="{{ form.num_Expidiente.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Número de Expediente</label>
                    <input type="text" 
                           name="num_Expidiente" 
                           id="{{ form.num_Expidiente.id_for_label }}" 
                           value="{{ form.num_Expidiente.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Número de Expediente">
                </div>
                <!-- Número de Identidad -->
                <div>
                    <label for="{{ form.identity_number.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Número de Identidad</label>
                    <input type="text" 
                           name="identity_number" 
                           id="{{ form.identity_number.id_for_label }}" 
                           value="{{ form.identity_number.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Número de Identidad">
                </div>
                <!-- Género -->
                <div class="max-w-sm mx-full">
                    <label for="{{ form.gender.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Género</label>
                    <select name="gender" 
                            id="{{ form.gender.id_for_label }}" 
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                        {% if form.gender == 'M' %}
                            <option value="Masculino" selected>Masculino</option>
                            <option value="Femenino">Femenino</option>
                        {% else %}
                            <option value="Masculino">Masculino</option>
                            <option value="Femenino" selected>Femenino</option>
                        {% endif %}
                    </select>
                </div>
                <!-- Teléfono -->
                <div>
                    <label for="{{ form.phone.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Teléfono</label>
                    <input type="text" 
                           name="phone" 
                           id="{{ form.phone.id_for_label }}" 
                           value="{{ form.phone.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Teléfono">
                </div>
                <!-- Dirección -->
                <div>
                    <label for="{{ form.origin.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Lugar de Procedencia</label>
                    <input type="text" 
                           name="origin" 
                           id="{{ form.origin.id_for_label }}" 
                           value="{{ form.origin.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Lugar de Procedencia">
                </div>
                <!-- Barrio / Colonia / Residencial -->
                <div>
                    <label for="{{ form.neighborhood.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Barrio / Colonia / Residencial</label>
                    <input type="text" 
                           name="neighborhood" 
                           id="{{ form.neighborhood.id_for_label }}" 
                           value="{{ form.neighborhood.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Barrio / Colonia / Residencial">
                </div>
                <!-- Nombre del Responsable -->
                <div>
                    <label for="{{ form.responsible_name.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombre del Responsable</label>
                    <input type="text" 
                           name="responsible_name" 
                           id="{{ form.responsible_name.id_for_label }}" 
                           value="{{ form.responsible_name.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Nombre del Responsable">
                </div>
                <!-- Relación / Parentesco -->
                <div>
                    <label for="{{ form.relationship.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Relación / Parentesco</label>
                    <input type="text" 
                           name="relationship" 
                           id="{{ form.relationship.id_for_label }}" 
                           value="{{ form.relationship.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Relación / Parentesco">
                </div>
                <!-- Teléfono del Responsable -->
                <div>
                    <label for="{{ form.responsible_phone.id_for_label }}" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Teléfono del Responsable</label>
                    <input type="text" 
                           name="responsible_phone" 
                           id="{{ form.responsible_phone.id_for_label }}" 
                           value="{{ form.responsible_phone.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Teléfono del Responsable">
                </div>
            </div>
        </fieldset>

        <!-- Sección 2: Historial Médico -->
        <fieldset class="py-8 px-3 mx-auto max-w-4xl lg:py-16 bg-gray-600 p-3 rounded-lg shadow-lg mt-8">
            <legend class="text-xl font-semibold text-dental-blue mb-4">Historial Médico</legend>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Hospitalizado en los últimos 2 años -->
                <div>
                    <label for="{{ form.hospitalized_last_2_years.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Ha sido hospitalizado en los últimos dos años?</label>
                    <div class="flex justify-center">
                        <select name="hospitalizado" 
                                id="{{ form.hospitalized_last_2_years.id_for_label }}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                        >
                            {% if form.hospitalized_last_2_years.value == 'yes' %}
                                <option value="Si" selected>Si</option>
                                <option value="No">No</option>
                            {% else %}
                                <option value="Si">Si</option>
                                <option value="No" selected>No</option>
                            {% endif %}
                        </select>
                    </div>
                    
                </div>
                <!-- Razón de hospitalización -->
                <div>
                    <label for="{{ form.hospitalization_reason.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Por qué?</label>
                    <input type="text" 
                           name="hospitalization_reason" 
                           id="{{ form.hospitalization_reason.id_for_label }}" 
                           value="{{ form.hospitalization_reason.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Razón de hospitalización">
                </div>
                <!-- Tratamiento médico actual -->
                <div>
                    <label for="{{ form.under_medical_treatment.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Está bajo tratamiento médico por enfermedad?</label>
                    <select 
                            name="under_medical_treatment" 
                            id="{{form.under_medical_treatment.id_for_label}}"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                            >
                        {% if form.under_medical_treatment.value == 'yes' %}
                            <option value="Si" selected>Si</option>
                            <option value="No">No</option>
                        {% else %}
                            <option value="Si">Si</option>
                            <option value="No" selected>No</option>
                        {% endif %}
                    </select>
                </div>
                <!-- Enfermedad actual -->
                <div>
                    <label for="{{ form.medical_condition.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Sí, qué enfermedad?</label>
                    <input type="text" 
                           name="medical_condition" 
                           id="{{ form.medical_condition.id_for_label }}" 
                           value="{{ form.medical_condition.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Enfermedad actual">
                </div>
                <!-- Alergias -->
                <div>
                    <label for="{{ form.allergic_to_substances.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Es alérgico a alguna sustancia, alimento o droga?</label>
                    <select name="allergic_to_substances" 
                            id="{{ form.allergic_to_substances.id_for_label }}" 
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                            >
                        {% if form.allergic_to_substances.value == 'yes' %}
                            <option value="Si" selected>Si</option>
                            <option value="No">No</option>
                        {% else %}
                            <option value="Si">Si</option>
                            <option value="No" selected>No</option>
                        {% endif %}
                    </select>
                </div>
                <!-- Detalle de alergias -->
                <div>
                    <label for="{{ form.allergies_detail.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Si a qué?</label>
                    <input type="text" 
                           name="allergies_detail" 
                           id="{{ form.allergies_detail.id_for_label }}" 
                           value="{{ form.allergies_detail.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Detalle de alergias">
                </div>
                <!-- Medicamentos habituales -->
                <div class="sm:col-span-2">
                    <label for="{{ form.regular_medications.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Qué medicamentos consume habitualmente?</label>
                    <input type="text" 
                           name="regular_medications" 
                           id="{{ form.regular_medications.id_for_label }}" 
                           value="{{ form.regular_medications.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Medicamentos habituales">
                </div>
                <!-- Fuma -->
                <div>
                    <label for="{{ form.smokes.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Fuma?</label>
                    <select name="smokes" 
                            id="{{ form.smokes.id_for_label }}"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                            >
                        {% if form.smokes.value == 'yes' %}
                            <option value="Si" selected>Si</option>
                            <option value="No">No</option>
                        {% else %}
                            <option value="Si">Si</option>
                            <option value="No" selected>No</option>
                        {% endif %}
                    </select>
                </div>
                <!-- Cigarrillos al día -->
                <div>
                    <label for="{{ form.cigarettes_per_day.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Cuántos al día?</label>
                    <input type="number" 
                           name="cigarettes_per_day" 
                           id="{{ form.cigarettes_per_day.id_for_label }}" 
                           value="{{ form.cigarettes_per_day.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Cigarrillos al día">
                </div>
                <!-- Toma alcohol -->
                <div>
                    <label for="{{ form.drinks_alcohol.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Toma alcohol?</label>
                    <select name="alcohol" 
                            id="{{ form.drinks_alcohol.id_for_label }}"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                            >
                        {% if form.drinks_alcohol.value == 'yes' %}
                            <option value="Si" selected>Si</option>
                            <option value="No">No</option>
                        {% else %}
                            <option value="Si">Si</option>
                            <option value="No" selected>No</option>
                        {% endif %}
                    </select>
                </div>
                <!-- Cantidad de alcohol -->
                <div>
                    <label for="{{ form.alcohol_amount.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Cuánto?</label>
                    <input type="text" 
                           name="alcohol_amount" 
                           id="{{ form.alcohol_amount.id_for_label }}" 
                           value="{{ form.alcohol_amount.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Cantidad de alcohol">
                </div>
                <!-- Embarazo -->
                <div>
                    <label for="{{ form.is_pregnant.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Está embarazada?</label>
                    <select name="pregnant" 
                            id="{{ form.is_pregnant.id_for_label}}"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                    >
                        {% if form.is_pregnant.value == 'yes' %}
                            <option value="Si" selected>Si</option>
                            <option value="No">No</option>
                        {% else %}
                            <option value="Si">Si</option>
                            <option value="No" selected>No</option>
                        {% endif %}
                    </select>
                </div>
                <!-- Meses de embarazo -->
                <div>
                    <label for="{{ form.pregnancy_months.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Cuántos meses?</label>
                    <input type="text" 
                           name="pregnancy_months" 
                           id="{{ form.pregnancy_months.id_for_label }}" 
                           value="{{ form.pregnancy_months.value|default_if_none:'' }}" 
                           class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                           placeholder="Meses de embarazo">
                </div>
                <!-- Afecciones -->
                <div class="max-w-sm mx-full">
                    <label class="block mb-2 text-sm font-medium text-gray-300">Afecciones</label>
                    <div class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg p-4 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        {% for checkbox in form.conditions %}
                            <div class="flex items-center mb-2">
                                {{ checkbox.tag }}
                                <label for="{{ checkbox.id_for_label }}" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">{{ checkbox.choice_label }}</label>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <!-- Observaciones -->
                <div>
                    <label for="{{ form.observations.id_for_label }}" class="block text-sm font-medium text-gray-300">Observaciones</label>
                    <textarea name="observations" 
                                id="{{ form.observations.id_for_label }}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                                placeholder="Observaciones"
                                rows="8">
                        {{ form.observations.value|default_if_none:'' }}
                    </textarea>
                    <div class="mt-9">
                        <label for="{{ form.attach_medical_report.id_for_label }}" class="block text-sm font-medium text-gray-300">Adjunta el informe médico</label>
                        <select name="attach_medical_report" 
                                id="{{ form.attach_medical_report.id_for_label}}"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                                >
                            {% if form.attach_medical_report.value == 'yes' %}
                                <option value="Si" selected>Si</option>
                                <option value="No">No</option>
                            {% else %}
                                <option value="Si">Si</option>
                                <option value="No" selected>No</option>
                            {% endif %}
                        </select>
                    </div>
                    
                </div>
                <!-- Informe médico adjunto -->
                <div>
                    
                </div>
            </div>
        </fieldset>

        <!-- Sección 4: Salud Bucal -->
        <fieldset class="mb-8">
            <legend class="text-xl font-semibold text-dental-blue mb-4">Salud Bucal</legend>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Dificultad para hablar -->
                <div>
                    <label for="{{ form.difficulty_speaking.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Tiene dificultad para hablar?</label>
                    {{ form.difficulty_speaking }}
                </div>
                <!-- Dificultad para masticar -->
                <div>
                    <label for="{{ form.difficulty_chewing.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Para masticar?</label>
                    {{ form.difficulty_chewing }}
                </div>
                <!-- Dificultad para abrir la boca -->
                <div>
                    <label for="{{ form.difficulty_opening_mouth.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Para abrir la boca?</label>
                    {{ form.difficulty_opening_mouth }}
                </div>
                <!-- Dificultad para tragar -->
                <div>
                    <label for="{{ form.difficulty_swallowing.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Para tragar los alimentos?</label>
                    {{ form.difficulty_swallowing }}
                </div>
                <!-- Sangrado de encías -->
                <div>
                    <label for="{{ form.bleeding_gums.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Le sangran las encías?</label>
                    {{ form.bleeding_gums }}
                </div>
                <!-- Movilidad dental -->
                <div>
                    <label for="{{ form.tooth_mobility.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Tiene movilidad en algún diente?</label>
                    {{ form.tooth_mobility }}
                </div>
                <!-- Pus en la boca -->
                <div>
                    <label for="{{ form.pus_in_mouth.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Le sale pus de algún lugar de la boca?</label>
                    {{ form.pus_in_mouth }}
                </div>
                <!-- Ubicación del pus -->
                <div>
                    <label for="{{ form.pus_location.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Dónde?</label>
                    {{ form.pus_location }}
                </div>
                <!-- Frecuencia de cepillado -->
                <div>
                    <label for="{{ form.brushing_frequency.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Cuántas veces al día se cepilla los dientes?</label>
                    {{ form.brushing_frequency }}
                </div>
                <!-- Estado de la higiene bucal -->
                <div>
                    <label for="{{ form.oral_hygiene_status.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Estado de la higiene bucal?</label>
                    {{ form.oral_hygiene_status }}
                </div>
                <!-- Condición de la lengua -->
                <div>
                    <label for="{{ form.tongue_condition.id_for_label }}" class="block text-sm font-medium text-gray-300">Lengua</label>
                    {{ form.tongue_condition }}
                </div>
                <!-- Condición de los labios -->
                <div>
                    <label for="{{ form.lips_condition.id_for_label }}" class="block text-sm font-medium text-gray-300">Labios</label>
                    {{ form.lips_condition }}
                </div>
                <!-- Condición de los carrillos -->
                <div>
                    <label for="{{ form.cheeks_condition.id_for_label }}" class="block text-sm font-medium text-gray-300">Carillos</label>
                    {{ form.cheeks_condition }}
                </div>
                <!-- Condición del piso de la boca -->
                <div>
                    <label for="{{ form.floor_of_mouth_condition.id_for_label }}" class="block text-sm font-medium text-gray-300">Piso de la boca</label>
                    {{ form.floor_of_mouth_condition }}
                </div>
                <!-- Condición del tejido gingival -->
                <div>
                    <label for="{{ form.gingival_tissue_condition.id_for_label }}" class="block text-sm font-medium text-gray-300">Tejido gingival – periodontal</label>
                    {{ form.gingival_tissue_condition }}
                </div>
                <!-- Cantidad de dientes presentes -->
                <div>
                    <label for="{{ form.number_of_teeth.id_for_label }}" class="block text-sm font-medium text-gray-300">Cantidad de dientes presentes</label>
                    {{ form.number_of_teeth }}
                </div>
                <!-- Presencia de sarro -->
                <div>
                    <label for="{{ form.tartar_presence.id_for_label }}" class="block text-sm font-medium text-gray-300">Presencia de sarro</label>
                    {{ form.tartar_presence }}
                </div>
                <!-- Enfermedad periodontal -->
                <div>
                    <label for="{{ form.periodontal_disease.id_for_label }}" class="block text-sm font-medium text-gray-300">Enfermedad periodontal</label>
                    {{ form.periodontal_disease }}
                </div>
                <!-- Ubicación de la enfermedad periodontal -->
                <div>
                    <label for="{{ form.periodontal_disease_location.id_for_label }}" class="block text-sm font-medium text-gray-300">¿Dónde? (si es localizada)</label>
                    {{ form.periodontal_disease_location }}
                </div>
                <!-- Diagnóstico -->
                <div>
                    <label for="{{ form.diagnosis.id_for_label }}" class="block text-sm font-medium text-gray-300">Diagnóstico</label>
                    {{ form.diagnosis }}
                </div>
                <!-- Plan de Tratamiento -->
                <div>
                    <label for="{{ form.treatment_plan.id_for_label }}" class="block text-sm font-medium text-gray-300">Plan de Tratamiento</label>
                    {{ form.treatment_plan }}
                </div>
            </div>
        </fieldset>

        <!-- Botones de acción -->
        <div class="flex justify-end space-x-4">
            <a href="{% url 'patients_list' %}" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-500 transition-colors">
                Cancelar
            </a>
            <button type="submit" class="bg-dental-green text-white px-4 py-2 rounded-md hover:bg-dental-green/80 transition-colors">
                {% if form.instance.pk %}Guardar Cambios{% else %}Crear Paciente{% endif %}
            </button>
        </div>
    </form>
</div>
{% endblock %}